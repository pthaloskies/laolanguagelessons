<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Everyday Lao - Language Learning</title>

  <!-- Load Fonts: Noto Sans Lao for Lao text, Noto Sans for general text -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Lao:wght@400;500;600&family=Noto+Sans:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    /* Base Reset and Styling */
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:'Noto Sans',sans-serif;
      background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%); /* Light, pleasant background */
      color:#2c3e50; /* Dark text for readability */
      padding:20px;
      line-height:1.6;
      min-height:100vh;
    }
    .container {
      max-width:1400px;
      margin:0 auto;
      background:white;
      border-radius:12px;
      box-shadow:0 10px 40px rgba(0,0,0,.1);
      overflow:hidden;
    }
    header {
      background:linear-gradient(135deg,#e67e22 0%,#d35400 100%); /* Orange/Earth tone for header */
      color:white;
      padding:30px 20px;
      text-align:center;
      border-bottom:5px solid #bdc3c7;
    }
    header h1 {
      font-weight:600;
      margin-bottom:5px;
      font-size:2rem;
    }
    header p {
      font-size:1rem;
      opacity:0.9;
    }

    /* Content and Table Styling */
    main {
      padding:30px 20px;
    }
    .section-title {
      font-family:'Noto Sans Lao',sans-serif;
      font-size:1.5rem;
      font-weight:600;
      color:#2c3e50;
      border-bottom:2px solid #ecf0f1;
      padding-bottom:10px;
      margin-bottom:20px;
    }

    /* List/Row Styling */
    .table {
      display:grid;
      gap:15px;
      padding-bottom:20px;
    }
    .row {
      display:grid;
      grid-template-columns:1fr 2fr 40px; /* English | Lao/Transliteration | Button */
      gap:10px;
      padding:15px;
      background:#fdfdfd;
      border:1px solid #ecf0f1;
      border-radius:8px;
      align-items:center;
      transition:background-color 0.2s, box-shadow 0.2s;
    }
    .row:hover {
      background-color:#f8f8f8;
      box-shadow:0 4px 15px rgba(0,0,0,.05);
    }
    .row:nth-child(even) {
      background:#fafafa;
    }

    /* Text Columns */
    .col-en {
      font-size:0.9rem;
      color:#7f8c8d;
      font-style:italic;
    }
    .col-lao {
      font-family:'Noto Sans Lao',sans-serif;
      font-size:1.1rem;
      font-weight:500;
      color:#2c3e50;
    }
    .col-lao .transliteration {
      display:block;
      font-size:0.85rem;
      font-style:normal;
      color:#95a5a6;
      margin-top:2px;
    }

    /* Audio Button Styling (Fixing the SVG and Look) */
    .audio-btn {
      width:40px;
      height:40px;
      border:none;
      border-radius:50%;
      background:#3498db; /* Blue color */
      color:white;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 4px 10px rgba(52, 152, 219, 0.4);
      transition:transform 0.1s, background 0.2s, box-shadow 0.2s;
      padding-left:3px; /* Center the triangle icon */
    }
    .audio-btn:hover {
      background:#2980b9;
      box-shadow:0 6px 15px rgba(52, 152, 219, 0.5);
    }
    .audio-btn:active {
      transform:scale(0.95);
    }
    .audio-btn svg {
      width:18px;
      height:18px;
      fill:white;
      transition:fill 0.2s;
    }

    /* State when audio is playing */
    .audio-btn.playing {
      background:#2ecc71; /* Green color when playing */
      box-shadow:0 4px 10px rgba(46, 204, 113, 0.6);
      padding-left:0; /* Use square/pause icon */
    }
    .audio-btn.playing svg {
      /* Change the icon style slightly when playing if needed, but the JS handles the play/stop logic */
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
      body { padding:10px; }
      header { padding:20px 10px; }
      header h1 { font-size:1.5rem; }
      header p { font-size:0.9rem; }
      main { padding:20px 10px; }
      .row {
        grid-template-columns:1fr 1fr 40px; /* Better for mobile */
        font-size:0.9rem;
        padding:10px;
      }
      .col-lao { font-size:1rem; }
    }
  </style>
</head>
<body>

  <div class="container">
    <header>
      <h1>Everyday Lao Phrases</h1>
      <p>Click the play button to hear the correct pronunciation of essential Lao words and phrases.</p>
    </header>

    <main>
      <div class="section-title">Common Courtesies</div>

      <div class="table">
        <!-- The following audio file paths are verified: -->

        <!-- 1. Come in -->
        <div class="row">
          <div class="col-en">Come in</div>
          <div class="col-lao">ເຊີນເຂົ້າ<span class="transliteration">*Sêun khao*</span></div>
          <button class="audio-btn" onclick="playAudio('lao-come-in.mp3', this)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3l14 9-14 9z"/></svg>
          </button>
        </div>

        <!-- 2. Go up/upstairs -->
        <div class="row">
          <div class="col-en">Go up/upstairs</div>
          <div class="col-lao">ຂຶ້ນເຂົ້າ<span class="transliteration">*Keun khao*</span></div>
          <button class="audio-btn" onclick="playAudio('lao-go-up.mp3', this)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3l14 9-14 9z"/></svg>
          </button>
        </div>

        <!-- 3. Go down/downstairs -->
        <div class="row">
          <div class="col-en">Go down/downstairs</div>
          <div class="col-lao">ລົງເຂົ້າ<span class="transliteration">*Long khao*</span></div>
          <button class="audio-btn" onclick="playAudio('lao-go-down.mp3', this)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3l14 9-14 9z"/></svg>
          </button>
        </div>

        <!-- 4. Thank you/Thanks (This is where the audio failure likely started) -->
        <div class="row">
          <div class="col-en">Thank you/Thanks</div>
          <div class="col-lao">ຂອບໃຈ<span class="transliteration">*Khòp jai*</span></div>
          <button class="audio-btn" onclick="playAudio('lao-khop-chai.mp3', this)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3l14 9-14 9z"/></svg>
          </button>
        </div>

        <!-- 5. You're welcome -->
        <div class="row">
          <div class="col-en">You're welcome</div>
          <div class="col-lao">ບໍ່ເປັນຫຍັງ<span class="transliteration">*Baw pen nyang*</span></div>
          <button class="audio-btn" onclick="playAudio('lao-baw-pen-nyang.mp3', this)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3l14 9-14 9z"/></svg>
          </button>
        </div>

        <!-- 6. Excuse me/Sorry -->
        <div class="row">
          <div class="col-en">Excuse me/Sorry</div>
          <div class="col-lao">ຂໍໂທດ<span class="transliteration">*Khaw thôht*</span></div>
          <button class="audio-btn" onclick="playAudio('lao-khaw-thot.mp3', this)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3l14 9-14 9z"/></svg>
          </button>
        </div>

        <!-- 7. Please sit -->
        <div class="row">
          <div class="col-en">Please sit</div>
          <div class="col-lao">ເຊີນນັ່ງ<span class="transliteration">*Sêun nung*</span></div>
          <button class="audio-btn" onclick="playAudio('lao-seun-nung.mp3', this)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3l14 9-14 9z"/></svg>
          </button>
        </div>

        <!-- 8. Please eat -->
        <div class="row">
          <div class="col-en">Please eat</div>
          <div class="col-lao">ເຊີນກິນ<span class="transliteration">*Sêun kin*</span></div>
          <button class="audio-btn" onclick="playAudio('lao-seun-kin.mp3', this)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3l14 9-14 9z"/></svg>
          </button>
        </div>

        <!-- 9. Goodbye -->
        <div class="row">
          <div class="col-en">Goodbye</div>
          <div class="col-lao">ລາກ່ອນ<span class="transliteration">*Laa kawn*</span></div>
          <button class="audio-btn" onclick="playAudio('lao-laa-kawn.mp3', this)">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 3l14 9-14 9z"/></svg>
          </button>
        </div>

      </div>
    </main>
  </div>

  <script>
    // The base path for your audio files. IMPORTANT: Must match the path where the audio files are hosted.
    const BASE = "audio/";
    // Version number to bust browser cache if audio files are updated
    const VERSION = 6; // Bumped the version from 5 to 6 to ensure all new audio fetches are fresh

    let currentAudio = null;
    let currentButton = null;

    /**
     * Plays the specified audio file and manages button state.
     * Includes robust error handling and cache busting.
     * @param {string} filename - The name of the audio file (e.g., 'lao-khop-chai.mp3').
     * @param {HTMLButtonElement} button - The button element that was clicked.
     */
    function playAudio(filename, button) {
      const src = `${BASE}${filename}?v=${VERSION}`;
      console.log("Attempting to play:", src);

      // --- 1. Stop and Reset Current Audio ---
      if (currentAudio) {
        currentAudio.pause();
        currentAudio.currentTime = 0;
        if (currentButton) {
          // Change the icon back to a standard play icon visually (not functional change yet)
          const svg = currentButton.querySelector('svg');
          if (svg) {
            svg.innerHTML = '<path d="M5 3l14 9-14 9z"/>'; // Play icon
          }
          currentButton.classList.remove("playing");
        }
      }

      // --- 2. Toggle Off (Stop) if same button is clicked ---
      // If the same button was clicked AND it was in the playing state (which is now reset above)
      // we only want to proceed if the new button is different from the old one, OR if the old one was not playing.
      if (currentButton === button) {
        currentAudio = null;
        currentButton = null;
        return;
      }

      // --- 3. Create and Play New Audio ---
      const audio = new Audio(src);
      currentAudio = audio;
      currentButton = button;
      button.classList.add("playing");

      // Change button icon to a "stop" or "square" icon when playing
      const svg = button.querySelector('svg');
      if (svg) {
        // Simple square/pause icon
        svg.innerHTML = '<path d="M6 6h12v12H6z"/>';
      }

      audio.play().catch(err => {
        // IMPORTANT: This catch handles the promise rejection when play() is called.
        console.error(`Audio playback failed for ${filename}:`, err);
        // This is often triggered if the file is missing or blocked by the browser's autoplay policy (less likely with user interaction).
        // Reset the button state immediately
        button.classList.remove("playing");
        if (svg) { svg.innerHTML = '<path d="M5 3l14 9-14 9z"/>'; } // Back to play icon
        if (currentButton === button) {
          currentAudio = null;
          currentButton = null;
        }
        // Provide user feedback for critical failure (like a missing file)
        console.error("Critical Error: File might be missing or corrupt. Check console logs for network errors.", src);
      });

      // --- 4. Event Handlers ---

      // When audio finishes playing
      audio.onended = () => {
        button.classList.remove("playing");
        if (svg) { svg.innerHTML = '<path d="M5 3l14 9-14 9z"/>'; } // Back to play icon
        if (currentButton === button) {
          currentAudio = null;
          currentButton = null;
        }
      };

      // When a loading/network error occurs
      audio.onerror = () => {
        // This is the common event for network errors (404, etc.)
        console.error(`Audio Error: Could not load or play audio file: ${filename}`);
        button.classList.remove("playing");
        if (svg) { svg.innerHTML = '<path d="M5 3l14 9-14 9z"/>'; } // Back to play icon
        if (currentButton === button) {
          currentAudio = null;
          currentButton = null;
        }
      };
    }
  </script>
</body>
</html>
